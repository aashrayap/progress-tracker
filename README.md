# Personal Assistant OS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  A local-first operating system that turns life data            â”‚
â”‚  into decisions and actions.                                    â”‚
â”‚                                                                 â”‚
â”‚  "Trade escape for building systems and habits where I can      â”‚
â”‚   operate at a level to change the world for the better."       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Given your logs and plans, the system always answers:
```
1. What matters now?     â†’  Hub (/)
2. What pattern is forming?  â†’  Reflect (/reflect)
3. What should I do next?    â†’  Hub next-action
```

---

## Life Pillars

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              LIFE PILLARS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   WEIGHT   â”‚ ADDICTION  â”‚  FITNESS   â”‚   MEALS    â”‚  MONEY   â”‚   TRAVEL    â”‚
â”‚  245â†’200   â”‚  90-Day    â”‚  Gym 5x/wk â”‚ Elk Bowl   â”‚ 500kâ†’1M â”‚  Poland x3  â”‚
â”‚  by Jun 30 â”‚  Reset     â”‚  W1-W5     â”‚ 1400 cal   â”‚ by 37   â”‚  in 2026    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Weight â€” 245 â†’ 200 lbs by Jun 30

```
Current â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 245 lbs
Goal    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 200 lbs

Feb 232 â”€â”€â”€ Mar 224 â”€â”€â”€ Apr 216 â”€â”€â”€ May 208 â”€â”€â”€ Jun 200
```

```
â”œâ”€ Age / Height: 30 / 6'0"
â”œâ”€ BMR:    2,089 cal/day
â”œâ”€ TDEE:   2,872 cal/day (light activity)
â”œâ”€ Target: 1,900 cal/day Â· 180g protein Â· 8k steps
â””â”€ Rate:   ~2 lbs/week
```

### Addiction Recovery â€” 90-Day Dopamine Reset

```
Jan 30 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Apr 30
       LoL: quit â”‚ Weed: quit â”‚ Poker: quit
       (cold turkey, zero negotiation)
```

```
Triggers:
â”œâ”€ âš  HIGH   Poker environment    Social pressure â†’ impulse
â”œâ”€ âš  HIGH   Poker loss           Loss â†’ dopamine crash â†’ seeks hit
â”œâ”€ âš  HIGH   Late night + friends Social + late = cascade
â””â”€ âš¡ MED    Boredom, evening     Unstructured time

Emergency: Recognize â†’ Delay 10m â†’ Move â†’ Remind "dopamine is healing"
```

### Fitness â€” Gym 5x/week (Habit > Optimization)

```
Rotation (completion-based, NOT calendar-based):
W1 â†’ W2 â†’ W3 â†’ W4 â†’ W5 â†’ W1 â†’ ...

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ W1  â”‚ squat / bench / lat_pulldown         â”‚
â”‚ W2  â”‚ ohp / lat_row / incline_bench        â”‚
â”‚ W3  â”‚ rdl / bench / pullup                 â”‚
â”‚ W4  â”‚ front_squat / incline_bench / lat_rowâ”‚
â”‚ W5  â”‚ lunges / ohp / pullup               â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rules: 3 exercises Ã— 3 sets Â· RIR 2-3 Â· 30-35 min Â· +5 min cardio finisher
Progression: top reps all sets â†’ +5 lbs Â· miss 2 sessions â†’ deload 10%
```

```
Weekly Split (Option B):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ Sun â”‚ Mon â”‚ Tue â”‚ Wed â”‚ Thu â”‚ Fri â”‚ Sat â”‚
â”‚Zone2â”‚ W1  â”‚ W2  â”‚ W3  â”‚Cardioâ”‚ W4 â”‚ W5  â”‚
â”‚45minâ”‚Lift â”‚Lift â”‚Lift â”‚25minâ”‚Lift â”‚Lift â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

Daily home dose: 6 pull-ups + 20 push-ups (easy, never to failure)
```

### Meals â€” Elk Bowl Protocol

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lunch    â”‚ 8oz elk + 1c rice + 1c veg  â”‚ ~700 cal â”‚
â”‚ Dinner   â”‚ 8oz elk + 1c rice + 1c veg  â”‚ ~700 cal â”‚
â”‚ Snacks   â”‚ carrots, beets              â”‚ ~100 cal â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL    â”‚                             â”‚~1400 cal â”‚
â”‚          â”‚                             â”‚ 115g pro â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Money â€” $500k â†’ $1M by Age 37

```
Strategy: hold S&P broad index Â· 10% annual return Â· no contributions

2026 (31) $550k â”€â”€â”€â”€ 2028 (33) $665k â”€â”€â”€â”€ 2030 (35) $805k â”€â”€â”€â”€ 2032 (37) $1M
```

### Travel â€” Poland x3 in 2026

```
â”œâ”€ Spring  Apr-May   ~$1,300
â”œâ”€ Summer  Jul-Aug   ~$1,300
â””â”€ Winter  Dec       ~$1,300
```

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI LAYER (decision + execution surfaces)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Hub â”‚ Review â”‚ Plan â”‚ Reflect â”‚ Health â”‚ Ideas                            â”‚
â”‚ Each surface has ONE job. No surface invents its own semantics.           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ consumes read models
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INTELLIGENCE LAYER (shared logic + decision engine)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ API routes (app/app/api/*)  +  domain helpers (app/app/lib/*)            â”‚
â”‚ Normalization Â· read models Â· next-action Â· insights Â· routing           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ reads/writes
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATA LAYER (canonical source of truth â€” flat CSVs in repo root)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ inbox.csv â”‚ daily_signals.csv â”‚ workouts.csv â”‚ reflections.csv            â”‚
â”‚ plan.csv â”‚ todos.csv                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
Three rules:
â”œâ”€ UI:           consumes read models, never invents business logic
â”œâ”€ Intelligence: single decision/routing layer for all interpretation + mutation
â””â”€ Data:         canonical CSVs, shared access via app/app/lib/csv.ts
```

---

## Data Contracts

```
inbox.csv
â”œâ”€ capture_id, captured_at, source, raw_text
â”œâ”€ status, suggested_destination, normalized_text, error
â””â”€ Purpose: append-only raw capture audit log

daily_signals.csv
â”œâ”€ date, signal, value, unit, context, source, capture_id, category
â””â”€ Purpose: daily facts (habits, metrics, events)

workouts.csv
â”œâ”€ date, workout, exercise, set, weight, reps, notes
â””â”€ Purpose: set-level lift history

reflections.csv
â”œâ”€ date, domain, win, lesson, change
â”œâ”€ Domains: gym â”‚ addiction â”‚ deep_work â”‚ eating â”‚ sleep
â””â”€ Purpose: win/lesson/change memory

plan.csv
â”œâ”€ date, start, end, item, done, notes
â””â”€ Purpose: time blocks + completion state

todos.csv
â”œâ”€ id, item, done, created
â””â”€ Purpose: task backlog
```

### Signal Types

```
daily_signals.csv signal values:
â”œâ”€ weight         number (lbs)
â”œâ”€ lol/weed/poker 0=relapse, 1=clean
â”œâ”€ gym/sleep/meditate/deep_work/ate_clean  0=missed, 1=done
â”œâ”€ calories       number (daily total)
â”œâ”€ trigger        text (craving trigger)
â”œâ”€ relapse        text (substance)
â””â”€ reset          1 (marks counter reset day)
```

---

## Workflow Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPTURE   â”‚â”€â”€â”€â”€â–¶â”‚  MATERIALIZE     â”‚
â”‚  inbox.csv â”‚     â”‚  â†’ daily_signals â”‚
â”‚  append-   â”‚     â”‚  â†’ workouts      â”‚
â”‚  only log  â”‚     â”‚  â†’ reflections   â”‚
â”‚            â”‚     â”‚  â†’ todos         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pipeline rule:
â”œâ”€ Capture  = preserve raw signal in inbox.csv for audit/reprocessing
â”œâ”€ Reflect  = interpretation (what patterns? what to change?)
â””â”€ Todos    = single actionable backlog
```

---

## UI Surfaces

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /  HUB                                                         â”‚
â”‚  Priority + next action now                                     â”‚
â”‚  â”œâ”€ north star Â· habit tiles Â· status metrics                   â”‚
â”‚  â”œâ”€ reset day / weight trend / gym day                          â”‚
â”‚  â”œâ”€ training card Â· daily insight Â· next action                 â”‚
â”‚  â””â”€ 90-day dopamine grid                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /plan  PLAN                                                    â”‚
â”‚  Time-block execution                                           â”‚
â”‚  â”œâ”€ year / month / week / day views                             â”‚
â”‚  â”œâ”€ drag-to-schedule Â· completion / skip toggles                â”‚
â”‚  â””â”€ todo sidebar                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /reflect  REFLECT                                              â”‚
â”‚  Evidence + insights                                            â”‚
â”‚  â”œâ”€ reflections by timeframe (week/month)                       â”‚
â”‚  â”œâ”€ recurring lessons Â· deep work analytics                     â”‚
â”‚  â””â”€ add reflection follow-up â†’ todo                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /health  HEALTH                                                â”‚
â”‚  Training + body composition                                    â”‚
â”‚  â”œâ”€ current / next workout Â· weekly split (Option B)            â”‚
â”‚  â”œâ”€ compound master list Â· exercise progression                 â”‚
â”‚  â””â”€ weight progress + checkpoints Â· meal status                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Hub Decision Priority

```
nextAction computed server-side:
1. ðŸ“‹ Start next plan block     (if one is pending)
2. ðŸ‹ Trigger training/cardio   (if gym not yet logged)
3. ðŸ’­ Push reflection review    (fallback)
```

---

## API Surface

```
READ MODELS (aggregation):
â”œâ”€ GET /api/hub              â†’ decision payload: habits, streaks, weight, plan, next action, insight
â”œâ”€ GET /api/health           â†’ weight trend, workouts, gym streak, weekly count, meal status
â”œâ”€ GET /api/deep-work        â†’ deep work sessions, week stats, category breakdown
â”œâ”€ GET /api/reflect-insights â†’ timeframe-aware insight synthesis
â””â”€ GET /api/plan/range       â†’ calendar range (events + habit map by date range)

CRUD ENDPOINTS:
â”œâ”€ GET/POST     /api/daily-signals  â†’ read (filterable) Â· append signals
â”œâ”€ GET/POST     /api/reflections    â†’ reflection read/write + recurring lesson detection
â”œâ”€ GET/POST/DELETE /api/plan        â†’ plan entry CRUD (upsert/delete by date+item)
â””â”€ GET/POST/PUT/DELETE /api/todos   â†’ todo CRUD (ID-based)
```

---

## Input Channels

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web App    â”‚     â”‚    Voice     â”‚     â”‚  CLI Skills  â”‚
â”‚   app/       â”‚     â”‚   Pipeline   â”‚     â”‚              â”‚
â”‚              â”‚     â”‚              â”‚     â”‚  /log        â”‚
â”‚  Review â”€â”€â”€â–¶ â”‚     â”‚ iOS Shortcut â”‚     â”‚  /reflect    â”‚
â”‚  Plan â”€â”€â”€â”€â–¶  â”‚     â”‚  â–¼           â”‚     â”‚  /weekly     â”‚
â”‚  Health â”€â”€â–¶  â”‚     â”‚ GH Issue     â”‚     â”‚              â”‚
â”‚  (reads +    â”‚     â”‚  â–¼           â”‚     â”‚  Writes      â”‚
â”‚   actions)   â”‚     â”‚ voice-       â”‚     â”‚  directly    â”‚
â”‚              â”‚     â”‚  inbox.sh    â”‚     â”‚  to CSVs     â”‚
â”‚              â”‚     â”‚  â–¼           â”‚     â”‚              â”‚
â”‚              â”‚     â”‚ Claude CLI   â”‚     â”‚              â”‚
â”‚              â”‚     â”‚  â–¼           â”‚     â”‚              â”‚
â”‚              â”‚     â”‚ CSV write +  â”‚     â”‚              â”‚
â”‚              â”‚     â”‚ git push     â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Voice pipeline: phone â†’ dictate â†’ GH Issue ("Voice: ...") â†’ voice-inbox.sh
  (launchd, 5s poll) â†’ Claude CLI â†’ parse + write CSVs â†’ commit + push â†’ close issue

Used at gym for workout logging (voice dictate sets/reps between exercises).
```

---

## Shared Domain Logic

```
app/app/lib/
â”œâ”€ csv.ts             All CSV read/write, schema headers, analytics
â”‚                     (streaks, habits, metrics, next workout)
â”œâ”€ config.ts          Static config: profile, exercises, workout templates
â”‚                     (W1-W5), weekly split, triggers, daily tasks
â”‚                     Legacy normalization: A/B/C â†’ W1/W2/W3
â”œâ”€ timeframe.ts       Timeframe resolution (week/month) for Reflect
â”œâ”€ types.ts           Shared types (DailySignalEntry, InboxEntry)
â””â”€ utils.ts           Date helpers (todayStr, daysAgoStr, toDateStr)
```

---

## Memory Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event Memory     â”‚ daily_signals, workouts,          â”‚ What happened     â”‚
â”‚                  â”‚ reflections                       â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ State Memory     â”‚ Derived API read models           â”‚ Where things      â”‚
â”‚                  â”‚ (/api/hub, /api/health)           â”‚ stand now         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Rule Memory      â”‚ Recurring lessons + playbook      â”‚ What to do when   â”‚
â”‚                  â”‚ (docs/life-playbook.md)           â”‚ patterns repeat   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Action Memory    â”‚ plan, todos                       â”‚ What is changing  â”‚
â”‚                  â”‚                                   â”‚ next              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Operating Cadence

```
DAILY:
â”œâ”€ Morning prime:  carry-forward lesson + top risk + one key action
â”œâ”€ During day:     execute planned blocks + log fast
â””â”€ Evening close:  reflection (win/lesson/change) + plan adjustment

WEEKLY:
â”œâ”€ Review trendlines, misses, relapse/gym/deep-work patterns
â”œâ”€ Promote repeated insights â†’ explicit rules/actions
â””â”€ Update plan based on evidence, not mood
```

---

## Non-Negotiable Rules

```
1. One concept, one canonical table.
2. No UI surface invents its own semantics.
3. Every insight must connect to an action.
4. Every action should be traceable to evidence.
5. Reflection must feed future decisions, not just history.
6. Prefer deterministic logic over hidden prompt magic.
7. CSVs are the single source of truth.
8. Shared domain logic lives in app/app/lib/.
```

---

## Known Gaps

```
â”œâ”€ âš  MEDIUM  Data integrity     CSV read-modify-write without file locks
â”œâ”€ âš  MEDIUM  Plan identity      Keyed by date+item, not stable row ID
â”œâ”€ âš¡ LOW     Signal dedupe      No idempotency guard on daily_signals POST
â”œâ”€ âš¡ LOW     Routing            daily_signals destination not yet in pipeline
â””â”€ âš¡ LOW     Streak logic       Based on logged rows, not calendar-day continuity
```

---

## Development Setup

```bash
cd app
nvm use          # .nvmrc â†’ Node 22
npm install
npm run dev      # localhost:3000
```

Node `>=20.9` required. Run `npm run lint && npm run build` before finishing changes.

---

## Documentation Map

```
â”œâ”€ docs/personal-os.md                 OS blueprint: mission, runtime loop, memory, build phases
â”œâ”€ docs/life-playbook.md               Domain protocols: vision, fitness, meals, addiction, finance, travel
â”œâ”€ docs/TEMP-architecture-changes.md   As-built technical audit + gap analysis
â”œâ”€ CLAUDE.md                           Assistant context + operational guidance
â””â”€ app/README.md                       App routes, APIs, data location, guardrails
```

---

## Near-Term Direction

```
1. Data integrity     â†’ stable row IDs for plan, idempotency guards for signals
2. Capture clarity    â†’ preserve raw capture log while routing directly to canonical tables
3. Reflect center     â†’ timeframe-aware insight synthesis â†’ action promotion into todos
4. Hub command center â†’ elevate nextAction as primary UI control
5. Compounding memory â†’ recurring lessons â†’ explicit rules â†’ future decision ranking
```
